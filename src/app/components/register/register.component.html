<section class="bg-main-light shadow p-2 my-2 rounded-4">
    <h1 class="h2 text-main">{{ 'register.register_title' | translate }} </h1>
    <form [formGroup]="registerForm" class="p-3" (ngSubmit)="registerSubmit()">
        <div class="my-2">
            <label for="name">{{ 'register.name_label' | translate }}</label>
            <input id="name" type="text" class="form-control" formControlName="name" [ngClass]="
            {
                'is-valid':!registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty),
                'is-invalid':registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty)
            }">
            @if (registerForm.get("name")?.errors && (registerForm.get("name")?.touched || registerForm.get("name")?.dirty)) {
                <div class="alert alert-danger w-50 m-0">
                    @if (registerForm.get("name")?.getError("required")) {
                        <p>{{ 'register.name_required' | translate }}</p>
                    }@else if(registerForm.get("name")?.getError("minlength")) {
                        <p>{{ 'register.name_min_length' | translate }}</p>
                    }
                </div>
            }
        </div>
        <div class="my-2">
            <label for="email">{{ 'register.email_label' | translate }}</label>
            <input id="email" type="email" class="form-control" formControlName="email" [ngClass]="
            {
                'is-valid':!registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty),
                'is-invalid':registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty)
            }">
            @if (registerForm.get("email")?.errors && (registerForm.get("email")?.touched || registerForm.get("email")?.dirty)) {
                <div class="alert alert-danger w-50 m-0">
                    @if (registerForm.get("email")?.getError("required")) {
                        <p>{{ 'register.email_required' | translate }}</p>
                    }@else if(registerForm.get("email")?.getError("email")) {
                        <p>{{ 'register.invalid_email' | translate }}</p>
                    }
                </div>
            }
        </div>
        <div class="my-2">
            <label for="password">{{ 'register.password_label' | translate }}</label>
            <input id="password" type="password" class="form-control" formControlName="password" [ngClass]="
            {
                'is-valid':!registerForm.get('password')?.errors && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty),
                'is-invalid':registerForm.get('password')?.errors && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty)
            }">
            @if (registerForm.get("password")?.errors && (registerForm.get("password")?.touched || registerForm.get("password")?.dirty)) {
                <div class="alert alert-danger w-50 m-0">
                    @if (registerForm.get("password")?.getError("required")) {
                        <p>{{ 'register.password_required' | translate }}</p>
                    }@else if(registerForm.get("password")?.getError("pattern")) {
                        <p>{{ 'register.password_min_length' | translate }}</p>
                    }
                </div>
            }
        </div>
        <div class="my-2">
            <label for="rePassword">{{ 'register.repassword_label' | translate }}</label>
            <input id="rePassword" type="password" class="form-control" formControlName="rePassword" [ngClass]="
            {
                'is-valid':!registerForm.getError('mismatch') && (registerForm.get('rePassword')?.touched || registerForm.get('rePassword')?.dirty),
                'is-invalid':registerForm.getError('mismatch') && (registerForm.get('rePassword')?.touched || registerForm.get('rePassword')?.dirty)
                }">
            @if (registerForm.getError("mismatch") && (registerForm.get("rePassword")?.touched || registerForm.get("rePassword")?.dirty)) {
                <div class="alert alert-danger w-50 m-0">
                    <p>{{ 'register.password_mismatch' | translate }}</p>
                </div>
            }
        </div>
        <div class="my-2">
            <label for="phone">{{ 'register.phone_label' | translate }}</label>
            <input id="phone" type="text" class="form-control" formControlName="phone" [ngClass]="
            {
                'is-valid':!registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty),
                'is-invalid':registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty)
                }">
            @if (registerForm.get("phone")?.errors && (registerForm.get("phone")?.touched || registerForm.get("phone")?.dirty)) {
                <div class="alert alert-danger w-50 m-0">
                    @if (registerForm.get("phone")?.getError("required")) {
                        <p>{{ 'register.phone_required' | translate }}</p>
                    }@else if(registerForm.get("phone")?.getError("pattern")) {
                        <p>{{ 'register.invalid_phone' | translate }}</p>
                    }
                </div>
            }
        </div>
        @if (accExistMsg) {
            <div class="alert alert-warning w-50">{{ accExistMsg }}</div>
        }
        <button type="submit" [disabled]="registerForm.invalid" class="btn-main d-block ms-auto">{{ 'register.register_button' | translate }}</button>

        @if (isSuccess) {
            <div class="alert alert-success fw-bolder">{{ 'register.register_success' | translate }}</div>
        }

    </form>
</section>
